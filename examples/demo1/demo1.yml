space:
  type: graph
  nodes:
    - { id: v00, pos_um: [0,0],   volume_nl: 0.05, region: mucosa, init: { glc: 0,   lac: 0, ac: 0, but: 0 } }
    - { id: v01, pos_um: [50,0],  volume_nl: 0.05, region: mucosa, init: { glc: 0,   lac: 0, ac: 0, but: 0 } }
    - { id: v10, pos_um: [0,50],  volume_nl: 0.05, region: mid,    init: { glc: 1.0, lac: 0, ac: 0, but: 0 } }
    - { id: v11, pos_um: [50,50], volume_nl: 0.05, region: mid,    init: { glc: 2.0, lac: 0, ac: 0, but: 0 } }
    - { id: v20, pos_um: [0,100], volume_nl: 0.05, region: lumen,  init: { glc: 0.5, lac: 0, ac: 0, but: 0 } }
    - { id: v21, pos_um: [50,100],volume_nl: 0.05, region: lumen,  init: { glc: 1.0, lac: 0, ac: 0, but: 0 } }
  edges:
    - { i: v00, j: v01, weight: 1.0 }
    - { i: v10, j: v11, weight: 1.0 }
    - { i: v00, j: v10, weight: 0.5 } 
    - { i: v01, j: v11, weight: 0.5 }
    - { i: v10, j: v20, weight: 1.0 }
    - { i: v11, j: v21, weight: 1.0 }
  diffusion_um2_s: { glc: 600, lac: 500, ac: 500, but: 400 }
  decay_s:         { glc: 0.00, lac: 0.00, ac: 0.00, but: 0.00 }

# Paths are relative to this YAML file (keep examples outside the package)
models:
  FD: FD.xml   # fibre degrader
  LU: LU.xml   # lactate utilizer
  BP: BP.xml   # butyrate producer

# Map your fields to exchange reaction IDs in the SBML models
metabolite_map:
  glc: EX_glc__D_e
  lac: EX_lac__L_e
  ac:  EX_ac_e
  but: EX_but_e

constraints:
  # maps concentration to uptake bound: uptake_bound = max_uptake * conc/(conc + uptake_k)
  uptake_k:   { glc: 0.08, lac: 0.05, ac: 0.03 }  # "K" parameters per field
  max_uptake: { glc: 10.0, lac: 8.0,  ac: 6.0  }  # vmax per field (mmol/gDW/h)
  alpha_flux_to_dC: 0.01  # unit conversion factor (per-voxel); tune later with biomass & volume

fba:
  solver: glpk
  objective: biomass_or_sinks
  sink_exchanges: [EX_but_e]  # used if no biomass rxn present

runtime:
  steps: 250
  dt_s: 2.0
